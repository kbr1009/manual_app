{% extends "manual/base.html" %}
{% block content %}

<div class="container" style="background: rgba(255,255,255,0);">
  <ol class="breadcrumb DestopView" style="background: rgba(233,236,239,0);">
    <li class="breadcrumb-item"><a href="{% url 'manual:top' %}"><span style="color: var(--pink);">Home</span></a></li>
    <li class="breadcrumb-item"><a href="{% url 'manual:edit_section_list' %}"><span style="color: var(--pink);">セクション編集</span></a></li>
    <li class="breadcrumb-item"><a href="{% url 'manual:edit_job_list' job_pk.section_id %}"><span style="color: var(--pink);">{{ job_pk.section }}の作業名</span></a></li>
    <li class="breadcrumb-item active"><span style="color: var(--secondary);">{{ job_pk.job_name }}の作業項目</span></li>
  </ol>
  <div class="row">
    <div class="container-fluid">
      <div class="card shadow">
        <div class="card-body" style="border-color: rgba(133,135,150,0);">
          <div class="row" >
            <div class="col">
              <header>
                <span class="d-flex d-sm-flex d-md-flex justify-content-center justify-content-sm-center justify-content-md-center" style="font-size: 20px;color: #f43fa5;border-top-width: 2px;border-top-color: #e0219e;border-right-width: 2px;border-right-color: var(--bs-pink);border-bottom-width: 2px;border-bottom-color: var(--bs-pink);border-left-width: 2px;border-left-color: var(--bs-pink);">{{ job_pk.job_name }}</span>
              </header>
            </div>
          </div>
          <div class="table-responsive table mt-2" id="dataTable-1" role="grid" aria-describedby="dataTable_info">
            <table class="table my-0" id="dataTable">
              <thead>
                <tr>
                  <th style="width: 65px;border-style: none;">No</th>
                  <th style="width: 210px;border-style: none;">作業項目</th>
                  <th style="width: 180px;border-style: none;">目的</th>
                  <th style="width: 180px;border-style: none;border-bottom-style: none;">達成基準</th>
                  <th style="width: 120px;border-style: none;"></th>
                </tr>
              </thead>
              <tbody class="sort">
                <form action="" method="POST">
                  {% csrf_token %}
                  {% for b in item_list %}
                  <tr>
                    <td><input type="checkbox" name="delete" value="{{ b.pk }}"> {{ forloop.counter }}</td>
                    <td><a href="{% url 'manual:edit_method_list' b.job.section_id b.job_id b.pk %}">{{ b.item_name }}</a></td>
                    <td>{{ b.purpose }}</td>
                    <td>{{ b.success }}</td>
                    <td><a href="{% url 'manual:item_update' b.pk %}">編集</a></td>
                  </tr>
                  {% csrf_token %}
                  {% endfor %}
              </tbody>
            </table>
          </div>
          <div class="row">
            <div class="col-md-6 align-self-center">
              <button type="submit" class="btn btn-primary" style="background: #f75646;color: rgb(255,255,255);border-width: 0px;border-style: none;border-bottom-color: rgba(78,115,223,0);">選択項目を削除</button>
                </form>
                <button onclick="location.href='{% url 'manual:item_create' job_pk.section_id job_pk.id %}'" class="btn btn-primary" type="button" style="background: #fffa84;color: rgb(247,80,251);border-width: 0px;border-style: none;margin: 5px;">作業項目を追加</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
<div class="card-body" style="border-color: rgba(133,135,150,0);">
</div>
<script>
  $('.sort').sortable({
    cursor: 'move',
    axis: 'y',
  });
</script>
{% endblock %}
